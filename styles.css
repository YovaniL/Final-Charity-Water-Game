/* Charity: water Brand Colors
Primary Colors:
- Yellow:     #FFC907
- Blue:       #2E9DF7

Secondary Colors:
- Light Blue: #8BD1CB
- Green:      #4FCB53
- Orange:     #FF902A
- Red:        #F5402C
- Dark Green: #159A48
- Pink:       #F16061
*/

/* Basic page layout */
:root {
  --cw-yellow: #FFC907;
  --cw-blue: #2E9DF7;
  --cw-light-blue: #8BD1CB;
  --cw-dark-green: #159A48;
  --cw-accent: #FF902A;
  --cw-text: #2b1f12;
}

body {
  font-family: Arial, Helvetica, sans-serif;
  margin: 16px;
  /* Desert theme: warm gradients and subtle sand texture */
  background: radial-gradient(1200px 500px at 10% 25%, rgba(255,200,120,0.06) 0%, transparent 20%),
              radial-gradient(900px 400px at 85% 80%, rgba(255,150,80,0.04) 0%, transparent 18%),
              linear-gradient(180deg, #FFF5E6 0%, #FFE3B8 35%, #FFD08A 60%, #FFC07A 100%);
  color: var(--cw-text); /* warmer text color */
}

/* Header */
#titleBar {
  text-align: center;
  margin-bottom: 12px;
}
#titleBar h1 {
  margin: 0;
  color: var(--cw-blue); /* Blue primary */
}
#siteLogo {
  max-width: 360px;
  height: auto;
  display: block;
  margin: 0 auto 8px;
}
#titleBar p {
  margin: 4px 0 12px;
  color: #159A48; /* Dark green accent */
}



/* overlays */
.overlay {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0,0,0,0.45);
  z-index: 50;
}
.panel {
  background: #fff;
  padding: 18px;
  border-radius: 8px;
  width: 320px;
  text-align: center;
}

.panel.title-panel {
  width: 380px;
  background: linear-gradient(135deg, #ffffff 0%, #e8f7ff 100%);
  border: 2px solid var(--cw-blue);
}

.title-panel h2 {
  color: var(--cw-blue);
  font-size: 32px;
  margin: 0 0 16px;
  text-shadow: 1px 1px 0 rgba(0,0,0,0.1);
}

.title-panel .tagline {
  color: #159A48;
  font-size: 18px;
  margin-bottom: 20px;
}

.title-panel .instructions {
  text-align: left;
  margin: 20px 0;
  padding: 15px;
  background: rgba(255,255,255,0.7);
  border-radius: 6px;
}

.title-panel .instructions h3 {
  margin: 0 0 10px;
  color: #333;
}

.title-panel .instructions ul {
  margin: 0;
  padding-left: 20px;
  line-height: 1.6;
}

.title-panel .instructions li {
  margin: 8px 0;
  color: #444;
}

.primary-button {
  background: var(--cw-blue);
  color: white;
  border: none;
  padding: 12px 24px;
  font-size: 18px;
  border-radius: 6px;
  cursor: pointer;
  transition: transform 0.2s;
}

.primary-button:hover {
  transform: translateY(-1px);
}

.panel.celebration {
  background: linear-gradient(135deg, #fff 0%, #e8f7ff 100%);
  border: 2px solid var(--cw-blue);
  box-shadow: 0 4px 12px rgba(46,157,247,0.15);
}

/* hide helper */
.hidden { display: none; }

/* HUD */
#hud {
  display: flex;
  gap: 18px;
  justify-content: center;
  margin-bottom: 12px;
  font-weight: 600;
  color: #0b2545;
}

/* Health bar styling */
.health-container {
  display: flex;
  align-items: center;
  gap: 8px;
}

.health-bar {
  width: 150px;
  height: 16px;
  background: rgba(0,0,0,0.1);
  border-radius: 8px;
  overflow: hidden;
  border: 1px solid rgba(0,0,0,0.1);
}

.wave-controls { display:flex; gap:8px; align-items:center; }
.small { padding:6px 8px; border-radius:6px; background:#ffffff; border:1px solid rgba(0,0,0,0.06); cursor:pointer; }
.small:hover { transform: translateY(-1px); }
.small.hidden { display:none; }

/* Cheer button special */
#cheerBtn { background: linear-gradient(180deg,#FFF9F0 0%, #FFF1D6 100%); border-color: rgba(255,160,50,0.12); }

.health-fill {
  width: 100%;
  height: 100%;
  background: var(--cw-dark-green);
  transition: width 0.3s ease;
}

/* Main content layout */
#content {
  display: flex;
  gap: 12px;
  align-items: flex-start;
  justify-content: center;
  flex-wrap: wrap;
}

.helpPanel {
  max-width: 320px;
  background: linear-gradient(180deg,#ffffff 0%, #f0fbf8 100%);
  padding: 10px;
  border-radius: 8px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.04);
  font-size: 14px;
  color: #0b2545;
}

.helpPanel .closeBtn {
  position: absolute;
  right: 8px;
  top: 6px;
  border: none;
  background: transparent;
  font-size: 14px;
  cursor: pointer;
  color: #6b6b6b;
}
.helpPanel .closeBtn:hover { color: var(--cw-blue); }

/* Sidebar / tower palette */
#sidebar {
  width: 200px;
  background: #ffffff;
  padding: 10px;
  border-radius: 8px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.06);
}
.towerCard {
  border: 1px solid #e6f4ff;
  padding: 8px;
  margin-bottom: 8px;
  border-radius: 6px;
  background: linear-gradient(180deg, #ffffff 0%, #f7fbff 100%);
}
.towerCard .name {
  font-weight: 700;
  color: var(--cw-blue);
  margin-bottom: 6px;
}
.towerCard.selected {
  border-color: var(--cw-blue);
  box-shadow: 0 2px 6px rgba(46,157,247,0.12);
}

/* Map area and grid */
#mapArea {
  background: #dff3ff;
  padding: 8px;
  border-radius: 8px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.04);
}
#grid {
  width: 720px;
  height: 360px;
  display: grid;
  grid-template-columns: repeat(15, 1fr);
  grid-template-rows: repeat(9, 1fr);
  gap: 6px;
  background: linear-gradient(180deg, #8BD1CB 0%, #ffffff 100%);
  padding: 8px;
  border-radius: 6px;
}

/* cell defaults */
.cell {
  background: #e7fcfb;
  border-radius: 4px;
  position: relative;
  border: 1px solid rgba(0,0,0,0.03);
  transition: box-shadow 120ms ease;
  cursor: pointer;
}
.cell:hover { box-shadow: 0 2px 6px rgba(0,0,0,0.08); }

/* path & tower visuals */
.cell.path {
  background: linear-gradient(180deg, var(--cw-light-blue) 0%, #7BC6C0 100%); /* light blue water path */
  box-shadow: inset 0 2px 4px rgba(46,157,247,0.1);
}
.cell.tower {
  background: var(--cw-yellow); /* yellow tower color */
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
}

/* drop (dirty/clean water) visual */
.drop {
  width: 22px;
  height: 22px;
  background: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='22' height='22' viewBox='0 0 24 24'><path fill='%23159A48' d='M12 2s5 4.5 5 8.5A5 5 0 0 1 12 20a5 5 0 0 1-5-9.5C7 6.5 12 2 12 2z'/></svg>") no-repeat center/contain;
  border-radius: 50%;
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  box-shadow: 0 2px 4px rgba(0,0,0,0.2);
  transition: background-image 0.25s ease;
}

/* partially damaged (not fully cleaned) - show a darker green with a crack look */
.drop.damaged {
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='22' height='22' viewBox='0 0 24 24'><path fill='%2311593a' d='M12 2s5 4.5 5 8.5A5 5 0 0 1 12 20a5 5 0 0 1-5-9.5C7 6.5 12 2 12 2z'/></svg>");
}

/* cleaned (blue) - does no damage */
.drop.cleaned {
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='22' height='22' viewBox='0 0 24 24'><path fill='%232E9DF7' d='M12 2s5 4.5 5 8.5A5 5 0 0 1 12 20a5 5 0 0 1-5-9.5C7 6.5 12 2 12 2z'/></svg>");
  opacity: 0.95;
}

/* visual feedback when a drop is targeted */
.drop.targeted { transform: translate(-50%, -50%) scale(1.18); z-index: 6; }

/* hit animation: stronger quick pulse */
@keyframes dropHit {
  0% { transform: translate(-50%, -50%) scale(1); }
  30% { transform: translate(-50%, -50%) scale(1.35); }
  100% { transform: translate(-50%, -50%) scale(1); }
}
.drop.hit-anim { animation: dropHit 200ms cubic-bezier(.2,.9,.3,1); }

/* hover makes drop slightly larger to indicate interaction */
.cell .drop:hover { transform: translate(-50%, -50%) scale(1.1); }

/* tower targeting glow */
.cell.targeting { box-shadow: 0 0 14px 3px rgba(46,157,247,0.22), inset 0 0 6px rgba(255,255,255,0.2); }

/* tower icon inside tower cell */
.cell.tower > div {
  width: 28px;
  height: 28px;
  background: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='28' height='28' viewBox='0 0 24 24'><rect x='4' y='6' width='16' height='12' rx='2' fill='%23FFFFFF' stroke='%232E9DF7' stroke-width='1.2'/><circle cx='12' cy='12' r='2' fill='%23FFC907'/></svg>") no-repeat center/contain;
  border-radius: 6px;
}

.towerIcon {
  width: 28px;
  height: 28px;
}
.towerLevel {
  position: absolute;
  bottom: 4px;
  right: 6px;
  background: rgba(0,0,0,0.12);
  color: #fff;
  font-size: 10px;
  padding: 2px 4px;
  border-radius: 4px;
}

/* Responsive tweaks to keep layout readable on small screens */
@media (max-width: 900px) {
  #grid { width: 92vw; height: calc(92vw * 0.5); }
  #sidebar { width: 160px; }
  .wireframe { width: 200px; }
}

/* Small-screen / mobile adjustments */
@media (max-width: 720px) {
  body { margin: 10px; }
  /* Stack content vertically: sidebar above map */
  #content { flex-direction: column-reverse; align-items: stretch; }
  #sidebar { width: 100%; order: 0; margin-bottom: 10px; }
  #mapArea { order: 1; }

  /* Make HUD wrap and increase touch targets */
  #hud { flex-wrap: wrap; gap: 10px; justify-content: space-between; }
  .small { padding: 10px 12px; font-size: 15px; }

  /* Grid becomes responsive square-ish */
  #grid { width: 96vw; height: calc(96vw * 0.5); grid-template-columns: repeat(15, 1fr); grid-template-rows: repeat(9, 1fr); }

  /* Slightly reduce padding for help panel to fit sidebar */
  .helpPanel { padding: 8px; font-size: 13px; }
}

/* small helpers */
.hidden-xs { display: none; }
